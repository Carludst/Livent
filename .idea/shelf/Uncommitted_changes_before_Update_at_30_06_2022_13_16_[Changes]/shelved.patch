Index: Control/main.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\ninclude_once \"../Utility/defaultPath.php\";\r\ninclude_once $GLOBALS['defaultPath'].\"/Utility/autoload.php\";\r\ninclude_once $GLOBALS['defaultPath'].\"/Foundation/FDbH.php\";\r\n\r\n//=new EUser('robertodistefano26@gmail.com','username','pasword','Organizer');\r\n//FDbH::store($user);\r\n//$e=new EEvent(\"Internazionali D'Italia\",\"L'Aquila\",$user,true);\r\n//FDbH::store($e);\r\n//$e->addCompetition(new ECompetition('5000m a punti',new DateTime(),'M','Pattinaggio',new EDistance(5000)));\r\n\r\n//$a=new EAthlete('r','d',new DateTime(),false);\r\n//FDbH::deleteFile('prova','r0');\r\nFDbH::storeFile('System/Event',\"front\",'C:\\Users\\rober\\OneDrive\\Pictures\\DefaultEvent.png','png');\r\n//$blob=FDbH::loadFile('prova','r0',0.5,false);\r\n//FFile::write($blob);\r\n//FFile::delete();\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Control/main.php b/Control/main.php
--- a/Control/main.php	(revision 48945c6b5e971c64b4101a7ad721d6387de05a95)
+++ b/Control/main.php	(date 1656343244421)
@@ -11,7 +11,10 @@
 
 //$a=new EAthlete('r','d',new DateTime(),false);
 //FDbH::deleteFile('prova','r0');
-FDbH::storeFile('System/Event',"front",'C:\Users\rober\OneDrive\Pictures\DefaultEvent.png','png');
+$u=new EUser("robertodistefano26@gmail.com", "username", "password", "Organizer");
+FDbH::store($u);
+$e=FDbH::loadOne(9,EEvent::class);
+FDbH::storeFile($e,"front",'C:\Users\lenovo\Documents\Università\III anno\II semestre\programmazione per il web\LivEvent\immagini\iternazionali_ditalia_open.jpg','jpg');
 //$blob=FDbH::loadFile('prova','r0',0.5,false);
 //FFile::write($blob);
 //FFile::delete();
Index: Control/CShowHome.php
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?php\r\n\r\nclass CShowHome\r\n{\r\n    private static function authorizer():bool{\r\n\r\n        if(FSession::isLogged() && (FSession::getUserLogged()->getType()!='Administrator'))throw new Exception(\"you don't have authorization\");\r\n        return CManageUser::callLogin();\r\n    }\r\n\r\n    public static function HomePage(){\r\n        try{\r\n            if(FSession::isLogged()){\r\n                $user=FSession::getUserLogged();\r\n                if(FDbH::existFile( $user,'profile'))   $profileImg=FDbH::loadFile( $user,'profile',0.2);\r\n                else   $profileImg=FDbH::loadFile('System/User','defaultProfile');\r\n            }\r\n            else{\r\n                $user=null;\r\n                $profileImg=null;\r\n            }\r\n\r\n            $homeImgName=FDbH::loadDirectory('System/HomeImg');\r\n            $homeImg=array();\r\n            for($i=0;$i<count($homeImgName);$i++)$homeImg[]=array('file'=>FDbH::loadFile( 'System/HomeImg',$homeImgName[$i]),'name'=>$homeImgName[$i]);\r\n            $eventsFinished=FDbH::searchEvent(false,NULL,NULL,NULL,NULL,new DateTime());\r\n            $eventsOpen=FDbH::searchEvent(true,NULL,NULL,NULL,new DateTime());\r\n            if(count($eventsFinished)>9) $eventsFinished=array_slice($eventsFinished,0,9);\r\n            if(count($eventsOpen)>9) $eventsOpen=array_slice($eventsOpen,0,9);\r\n            $eventsFinishedImg=array();\r\n            $eventsOpenImg=array();\r\n            $default='';\r\n            foreach($eventsFinished as $element){\r\n                if(FDbH::existFile($element, 'front')) $eventsFinishedImg[]=FDbH::loadFile($element, 'front', 0.4);\r\n                elseif(!empty($default))$eventsFinishedImg[]=$default;\r\n                elseif(FDbH::existFile('System/Event', 'front')){\r\n                    $default=FDbH::loadFile('System/Event', 'front', 0.4);\r\n                    $eventsFinishedImg[]=$default;\r\n                }\r\n                else $eventsFinishedImg[]=$default;\r\n            }\r\n            foreach($eventsOpen as $element){\r\n                if(FDbH::existFile($element, 'front')) $eventsOpenImg[]=FDbH::loadFile($element, 'front', 0.4);\r\n                elseif(!empty($default))$eventsOpenImg[]=$default;\r\n                elseif(FDbH::existFile('System/Event', 'front')){\r\n                    $default=FDbH::loadFile('System/Event', 'front', 0.4);\r\n                    $eventsOpenImg[]=$default;\r\n                }\r\n                else $eventsOpenImg[]=$default;\r\n            }\r\n\r\n\r\n            $view=new VHome();\r\n            $view->show($user,$profileImg,$eventsOpen,$eventsFinished,$homeImg,$eventsOpenImg,$eventsFinishedImg);\r\n        }\r\n        catch(Exception $e){\r\n            CError::store($e,\"ci scusiamo per il disaggio !!! La visualizazzione della pagina home non è andata a buon fine\");\r\n        }\r\n    }\r\n\r\n    public static function setIntroImg(String $href){\r\n        try{\r\n            if(self::authorizer()){\r\n                $array=FDbH::loadDirectory('System/HomeImg');\r\n                if(count($array)>0)$name=(int)max($array)+1;\r\n                else $name=0;\r\n                FDbH::storeFile('System/HomeImg',$name,$href,'type',2);\r\n            }\r\n        }\r\n        catch(Exception $e){\r\n            CError::store($e,\"ci scusiamo per il disaggio !!! il file non è stato allegato , verificare di possedere le autorizazioni necessarie\");\r\n        }\r\n    }\r\n\r\n    public static function setDefaultProfileImg(String $href){\r\n        try{\r\n            if(self::authorizer()){\r\n                //prendi input\r\n                FDbH::updateFile('System/User','defaultProfile',$href,'type',2);\r\n            }\r\n        }\r\n        catch(Exception $e){\r\n            CError::store($e,\"ci scusiamo per il disaggio !!! il file non è stato allegato , verificare di possedere le autorizazioni necessarie\");\r\n        }\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Control/CShowHome.php b/Control/CShowHome.php
--- a/Control/CShowHome.php	(revision 48945c6b5e971c64b4101a7ad721d6387de05a95)
+++ b/Control/CShowHome.php	(date 1656343332673)
@@ -23,7 +23,7 @@
             $homeImgName=FDbH::loadDirectory('System/HomeImg');
             $homeImg=array();
             for($i=0;$i<count($homeImgName);$i++)$homeImg[]=array('file'=>FDbH::loadFile( 'System/HomeImg',$homeImgName[$i]),'name'=>$homeImgName[$i]);
-            $eventsFinished=FDbH::searchEvent(false,NULL,NULL,NULL,NULL,new DateTime());
+            $eventsFinished=FDbH::searchEvent(true,NULL,NULL,NULL,NULL,new DateTime());
             $eventsOpen=FDbH::searchEvent(true,NULL,NULL,NULL,new DateTime());
             if(count($eventsFinished)>9) $eventsFinished=array_slice($eventsFinished,0,9);
             if(count($eventsOpen)>9) $eventsOpen=array_slice($eventsOpen,0,9);
